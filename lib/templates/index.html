<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />        
		<link rel="stylesheet" media="screen" type="text/css" title="Design" href="design.css" /> 
		<script type="text/javascript">
			var gaJsHost = (("https:" == document.location.protocol) ?"https://ssl." : "http://www.");
			document.write(unescape("%3Cscript src='" + gaJsHost +"google-analytics.com/ga.js'type='text/javascript'%3E%3C/script%3E"));
		</script>
		<script type="text/javascript">
			try {
				var pageTracker = _gat._getTracker("UA-407886-3");
				pageTracker._trackPageview();
			} catch(err) {}
		</script>		
		<script src="http://openlayers.org/api/OpenLayers.js" type="text/javascript"></script>
		<script src="http://www.openstreetmap.org/openlayers/OpenStreetMap.js" type="text/javascript"></script>
		<script src="scripts/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="scripts/jquery.contextMenu.js" type="text/javascript"></script>
		<script src="scripts/jquery.tablesorter.js" type="text/javascript"></script>
		<script type="text/javascript">
			var lat=$latMap;
			var lon=$lonMap;
			var zoom=$zoom;
			var initialStartText="$addressStart";
			var initialDestText="$addressDest";
			var lonStart=$lonStart;
			var latStart=$latStart;
			var lonDest=$lonDest;
			var latDest=$latDest;
			var snode=$snode;
			var dnode=$dnode;
			var fromHash=$fromHash;
			var hurl="$hashUrl";
			var map; //complex object of type OpenLayers.Map
			var routeLayer;
			var proj4326 = new OpenLayers.Projection("EPSG:4326"); // longitude/latitude in decimal degrees
			var proj900913 = new OpenLayers.Projection("EPSG:900913"); // Google projection
			var nodes = {
			    'start': null,
			    'dest': null,
			    'fmouse_start': false,
			    'fmouse_dest': false			
			};
			var disableClickEvent = false;
			var icon_standard;
			var icon = {
			    'start': null,
			    'dest': null
			};
			var controlDrag = null;
			var layerMarkers = new OpenLayers.Layer.Vector("Markers");
			icon_standard = OpenLayers.Util.extend({}, OpenLayers.Feature.Vector.style['default']);
			icon_standard.graphicWidth = 25;
			icon_standard.graphicHeight = 35;
			icon_standard.graphicXOffset = -icon_standard.graphicWidth;
			icon_standard.graphicYOffset = -icon_standard.graphicHeight;
			icon_standard.graphicOpacity = 1.0;
			icon_standard.pointRadius = 6;
			icon['start'] = OpenLayers.Util.extend({}, icon_standard);
			icon['start'] .externalGraphic = "img/arrow-green.png";
			icon['dest']  = OpenLayers.Util.extend({}, icon_standard);
			icon['dest'] .externalGraphic = "img/arrow-finish.png";  
			var node_markers = {
			     'start': null,
			     'dest': null
			 };
			var in_options = {'internalProjection': proj900913,'externalProjection': proj4326};  
			var geojson_reader = new OpenLayers.Format.GeoJSON(in_options);
			var features;
			var paths;
			var cacheStart;
			var cacheDest;
		</script>
		<script src="scripts/mumoro.js" type="text/javascript"></script>
		<link rel="icon" type="image/png" href="img/arrow.png" />
		<title>Mumoro demonstration</title>

	</head>
	<body onload="init();">
		<h1>Mumoro demonstration on the city of Rennes</h1>
		<h2>Demonstration of our multimodal and multiobjective routing algorithms</h2>
		<p>			
			<a href="/info">Read more here</a>
		</p>
		<form method="get" action="javascript:validateAddresses(this);">
			<div id="address_form">
				<label for="startAdr">Start location:</label>
				<span id="formError_start"></span>
				<span class="tinyText">Example: 23 rue de la Chalotais 35000 Rennes France</span>
				<br/>			
				<input type="text" name="startAdr" id="startAdr" tabindex="10" size="75" />
				<input type="button" value="Reverse" onclick="return reverseLocations(this)"/>
				<br/>
				<label for="endAdr">Destination:</label>
				<span id="formError_dest"></span>
				<br/>
				<input type="text" name="endAdr" id="endAdr" tabindex="20" size="75" />
				<input type="submit" value="Calculate route" />
			</div>
		</form>
		<div id="info">
			<p id="path_costs"></p>
			<p id="routing_description"></p>
			<p id="hash_url"></p>
		</div>
		<p>
		</p>
		<div id="map"></div>
		<ul id="myMenu" class="contextMenu">
			<li class="start"><a href="#start">Set Start</a></li>
			<li class="dest"><a href="#dest">Set Destination</a></li>
		</ul>
		<div id="footer">
			<hr/>
			Streets data provided by 
			<a href="http://www.openstreetmap.org/">Open Street Maps</a>
			<img src="img/by-sa.png" width="75" height="14" alt="CC-BY-SA"/>
			<br/>
			Bikes data provided by 
			<a href="http://data.keolis-rennes.com">Data Keolis Rennes</a>
			<img src="img/by-nc-sa.png" width="75" height="14" alt="CC-BY-SA-NC"/>
			<br/>
			Routing algorithms licensed by GPL License
			<br/>
			<br/>		
			<img src="img/region.png" width="76" height="76" alt="Région Midi-Pyrénées"/>
		</div>
	</body>
</html>
